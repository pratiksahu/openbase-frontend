# FIX_002: GoalWizard Component Issues

**Priority**: HIGH
**Estimated Time**: 1-2 hours
**Files Affected**: 17 errors across 3 files

## Overview

Multiple type issues in the GoalWizard component system related to step configuration, data validation, and component props.

## Errors to Fix

### 1. Missing Step ID Property
**File**: `src/components/GoalWizard/GoalWizard.tsx:239`
```typescript
// ERROR: Property 'id' does not exist on type 'StepConfig'
config: DEFAULT_STEPS.find(s => s.id === currentStep) || DEFAULT_STEPS[0],
```

### 2. Missing AchievableStepProps Export
**File**: `src/components/GoalWizard/steps/AchievableStep.tsx:54`
```typescript
// ERROR: Module has no exported member 'AchievableStepProps'
AchievableStepProps,
```

### 3. Step Data Type Mismatches (Multiple Components)
**File**: `src/components/GoalWizard/GoalWizard.tsx:246, 253, 260`
```typescript
// ERROR: Missing required properties in step data
<ContextStep {...commonProps} />    // Missing: currentSituation, problemStatement, etc.
<SpecificStep {...commonProps} />   // Missing: title, description, specificObjective, etc.
<MeasurableStep {...commonProps} /> // Missing: measurable, successDefinitions
```

### 4. Form Data Spread Operation Issues
**File**: `src/components/GoalWizard/WizardContext.tsx:78`
```typescript
// ERROR: Spread types may only be created from object types
...state.formData[step as keyof WizardFormData],
```

### 5. Step Data Validation Issues (Multiple)
**Files**: `src/components/GoalWizard/WizardContext.tsx:320-330`
```typescript
// ERROR: Argument type mismatch - 'undefined' not assignable to step data types
return validateContextStep(stepData);
return validateSpecificStep(stepData);
// ... similar for all step types
```

### 6. Step Data Initialization Issues
**File**: `src/components/GoalWizard/GoalWizard.utils.ts:596-628`
```typescript
// ERROR: Missing required properties in step data objects
specific: { tags: string[]; }  // Missing: title, description, specificObjective, successCriteria
context: { category: GoalCategory.PERSONAL; stakeholdersInvolved: string[]; }  // Missing: currentSituation, problemStatement, initialGoalDescription
measurable: { measurable: {...}; }  // Missing: successDefinitions
```

## Solution Strategy

### 1. Fix StepConfig Interface
Add missing `id` property to StepConfig:

```typescript
export interface StepConfig {
  id: WizardStep;
  title: string;
  description: string;
  // ... other properties
}
```

### 2. Export Missing Types
Ensure all step prop types are properly exported:

```typescript
// In GoalWizard.types.ts
export interface AchievableStepProps {
  // ... prop definitions
}
```

### 3. Fix Step Data Initialization
Update step data objects to include all required properties:

```typescript
const defaultContextData: ContextStepData = {
  currentSituation: '',
  problemStatement: '',
  initialGoalDescription: '',
  category: GoalCategory.PERSONAL,
  stakeholdersInvolved: [],
};
```

### 4. Improve Type Safety in Form Data
Add proper type guards and initialization:

```typescript
function getStepData<T>(formData: WizardFormData, step: WizardStep): T {
  const data = formData[step];
  return data || getDefaultStepData(step);
}
```

## Implementation Steps

1. **Update StepConfig interface** to include `id` property
2. **Export missing prop interfaces** from GoalWizard.types.ts
3. **Create default step data factories** for each step type
4. **Fix step data initialization** in utils file
5. **Improve type safety** in WizardContext validation
6. **Add proper type guards** for step data access
7. **Test wizard navigation** and step validation

## Files to Modify

- [ ] `src/components/GoalWizard/GoalWizard.types.ts` - Add missing exports and fix interfaces
- [ ] `src/components/GoalWizard/GoalWizard.tsx` - Fix step configuration and props
- [ ] `src/components/GoalWizard/GoalWizard.utils.ts` - Fix step data initialization
- [ ] `src/components/GoalWizard/WizardContext.tsx` - Fix validation and type safety
- [ ] `src/components/GoalWizard/steps/AchievableStep.tsx` - Fix imports

## Testing Checklist

- [ ] All wizard steps load without type errors
- [ ] Step navigation works correctly
- [ ] Form data validation works for each step
- [ ] Default step data is properly initialized
- [ ] Step components receive correct props
- [ ] Wizard can complete full workflow

## Dependencies

- Depends on FIX_001 being completed first
- Blocks further GoalWizard development