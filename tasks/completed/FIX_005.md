# FIX_005: Storybook Issues

**Priority**: LOW (Non-blocking)
**Estimated Time**: 30-45 minutes
**Files Affected**: 66 errors across 3 files

## Overview

All Storybook story files have the same issue - `action()` function calls are missing the required `name` parameter. This is a simple but repetitive fix across many stories.

## Errors to Fix

### 1. AcceptanceCriteria Stories (11 errors)
**File**: `src/components/TaskEditor/AcceptanceCriteria.stories.tsx`
```typescript
// ERROR: Expected 1 arguments, but got 0
onCriteriaChange: action(),  // ❌ Missing name parameter
```

**Line Numbers**: 231, 252, 273, 298, 319, 340, 361, 382, 428, 616, 643

### 2. ChecklistEditor Stories (66 errors)
**File**: `src/components/TaskEditor/ChecklistEditor.stories.tsx`
```typescript
// ERROR: Expected 1 arguments, but got 0
onChecklistChange: action(),  // ❌ Missing name parameter
onItemAdd: action(),         // ❌ Missing name parameter
onItemUpdate: action(),      // ❌ Missing name parameter
// ... etc for all callback props
```

**Line Numbers**: 279-285, 303-309, 327-333, 351-357, 380-386, 404-410, 428-434, 528-534, 556-562, 580, 583, 587, 591, 595, 599, 658-664

### 3. SubtaskList Stories (59 errors)
**File**: `src/components/TaskEditor/SubtaskList.stories.tsx`
```typescript
// ERROR: Expected 1 arguments, but got 0
onSubtasksChange: action(),  // ❌ Missing name parameter
onSubtaskAdd: action(),     // ❌ Missing name parameter
// ... etc
```

**Line Numbers**: 152-157, 175-180, 198-203, 227-232, 279-284, 306-311, 332-337, 397-402, 449-454, 476-481, 499, 502, 506, 510, 514

## Solution Strategy

### Simple Find & Replace Fix
The `action()` function requires a name parameter to identify the action in Storybook's Actions panel:

```typescript
// Before
onSave: action(),

// After
onSave: action('onSave'),
```

### Batch Fix Approach
Create a simple script or use find/replace to fix all instances:

```typescript
// Pattern to find
action\(\)

// Replace with (requires manual name insertion)
action('CALLBACK_NAME')
```

### Example Fixes for Each File

#### AcceptanceCriteria.stories.tsx
```typescript
export const Default: Story = {
  args: {
    criteria: mockCriteria,
    onCriteriaChange: action('onCriteriaChange'), // ✅ Fixed
  },
};
```

#### ChecklistEditor.stories.tsx
```typescript
export const EmptyChecklist: Story = {
  args: {
    checklist: [],
    onChecklistChange: action('onChecklistChange'), // ✅ Fixed
    onItemAdd: action('onItemAdd'),                 // ✅ Fixed
    onItemUpdate: action('onItemUpdate'),           // ✅ Fixed
    onItemDelete: action('onItemDelete'),           // ✅ Fixed
    onItemToggle: action('onItemToggle'),           // ✅ Fixed
    onItemReorder: action('onItemReorder'),         // ✅ Fixed
  },
};
```

#### SubtaskList.stories.tsx
```typescript
export const Default: Story = {
  args: {
    subtasks: mockSubtasks,
    onSubtasksChange: action('onSubtasksChange'),   // ✅ Fixed
    onSubtaskAdd: action('onSubtaskAdd'),           // ✅ Fixed
    onSubtaskUpdate: action('onSubtaskUpdate'),     // ✅ Fixed
    onSubtaskDelete: action('onSubtaskDelete'),     // ✅ Fixed
    onSubtaskReorder: action('onSubtaskReorder'),   // ✅ Fixed
  },
};
```

## Implementation Steps

### Automated Approach (Recommended)
1. **Create replacement script** to fix all instances
2. **Map each `action()` to its prop name** based on the property key
3. **Run script** across all story files
4. **Verify Storybook loads** without errors

### Manual Approach
1. **Open each story file**
2. **Find all `action()` calls**
3. **Replace with `action('propName')`** where propName matches the property
4. **Test in Storybook**

## Files to Modify

- [ ] `src/components/TaskEditor/AcceptanceCriteria.stories.tsx` - 11 fixes
- [ ] `src/components/TaskEditor/ChecklistEditor.stories.tsx` - 66 fixes
- [ ] `src/components/TaskEditor/SubtaskList.stories.tsx` - 59 fixes

## Replacement Patterns

### AcceptanceCriteria Stories
```typescript
onCriteriaChange: action() → onCriteriaChange: action('onCriteriaChange')
```

### ChecklistEditor Stories
```typescript
onChecklistChange: action() → onChecklistChange: action('onChecklistChange')
onItemAdd: action() → onItemAdd: action('onItemAdd')
onItemUpdate: action() → onItemUpdate: action('onItemUpdate')
onItemDelete: action() → onItemDelete: action('onItemDelete')
onItemToggle: action() → onItemToggle: action('onItemToggle')
onItemReorder: action() → onItemReorder: action('onItemReorder')
```

### SubtaskList Stories
```typescript
onSubtasksChange: action() → onSubtasksChange: action('onSubtasksChange')
onSubtaskAdd: action() → onSubtaskAdd: action('onSubtaskAdd')
onSubtaskUpdate: action() → onSubtaskUpdate: action('onSubtaskUpdate')
onSubtaskDelete: action() → onSubtaskDelete: action('onSubtaskDelete')
onSubtaskReorder: action() → onSubtaskReorder: action('onSubtaskReorder')
```

## Testing Checklist

- [ ] All story files compile without type errors
- [ ] Storybook loads all stories successfully
- [ ] Actions panel shows named actions when interacting
- [ ] No `action()` calls without parameters remain

## Automation Script Template

```bash
# Find & replace script for fixing action() calls
# Run in project root

# AcceptanceCriteria fixes
sed -i 's/onCriteriaChange: action()/onCriteriaChange: action('\''onCriteriaChange'\'')/g' src/components/TaskEditor/AcceptanceCriteria.stories.tsx

# ChecklistEditor fixes
sed -i 's/onChecklistChange: action()/onChecklistChange: action('\''onChecklistChange'\'')/g' src/components/TaskEditor/ChecklistEditor.stories.tsx
sed -i 's/onItemAdd: action()/onItemAdd: action('\''onItemAdd'\'')/g' src/components/TaskEditor/ChecklistEditor.stories.tsx
# ... etc for all patterns

# SubtaskList fixes
sed -i 's/onSubtasksChange: action()/onSubtasksChange: action('\''onSubtasksChange'\'')/g' src/components/TaskEditor/SubtaskList.stories.tsx
# ... etc
```

## Dependencies

- No blocking dependencies
- Independent fix, can be done anytime
- Will improve Storybook development experience

## Impact

- **Low Priority**: Doesn't block functionality
- **Developer Experience**: Makes Storybook actions more useful
- **Easy Fix**: Repetitive but straightforward