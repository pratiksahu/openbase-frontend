echo "üîç Running pre-commit checks..."

# Run lint-staged
echo "üé® Running lint-staged..."
npm run lint:staged

# Type checking
echo "üîß Running type check..."
npm run typecheck

# Check for console.log statements in production (allow console.error and console.warn)
echo "üßπ Checking for console.log statements..."
if grep -r "console\.log\|console\.info\|console\.debug" --include="*.ts" --include="*.tsx" --include="*.js" --include="*.jsx" src/ 2>/dev/null; then
  echo "‚ùå Console.log, console.info, or console.debug statements found in source code. Please remove them before committing."
  echo "Note: console.error and console.warn are allowed for error handling."
  exit 1
fi

echo "‚úÖ Pre-commit checks passed!"